{"ast":null,"code":"'use strict';\n\nconst __ = require('underscore'),\n      createAPIRequest = require('../models/apirequest');\n\nconst API_ANNOTATE = 'https://vision.googleapis.com/v1/images:annotate';\n\nclass Client {\n  constructor(options) {\n    this._options = options || {};\n  }\n  /**\n   * annotate\n   *\n   * @desc Call cloud vision API\n   *\n   * @param  {array} requests - Parameters for request\n   */\n\n\n  annotate(requests) {\n    return new Promise((resolve, reject) => {\n      this._buildRequests(requests).then(params => {\n        var parameters = {\n          options: {\n            url: API_ANNOTATE,\n            method: 'POST'\n          },\n          bodyJSON: true,\n          data: {\n            requests: params\n          },\n          params: {\n            headers: {\n              'Accept': 'application/json',\n              'Content-Type': 'application/json'\n            }\n          },\n          requiredParams: [],\n          pathParams: [],\n          context: this\n        };\n        createAPIRequest(parameters, (err, response) => {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(response);\n          }\n        });\n      });\n    });\n  }\n\n  _buildRequests(requests) {\n    return Promise.all(__.map(requests, req => req.build()));\n  }\n\n}\n\nmodule.exports = Client;","map":null,"metadata":{},"sourceType":"script"}