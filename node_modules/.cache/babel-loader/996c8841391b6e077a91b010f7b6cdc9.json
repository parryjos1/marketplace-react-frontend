{"ast":null,"code":"var _jsxFileName = \"/Users/joshparry/sei/projects/marketplace-app-MERN-stack/marketplace-react-frontend/src/components/Cart.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom'; // import { Link } from 'react-router-dom';\n// import {HashRouter as Router, Route} from 'react-router-dom';\n\nexport default class Cart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.deconstructState = cart => {\n      const productRequests = [];\n\n      for (var i = 0; i < cart.length; i++) {\n        console.log(cart[i]);\n        let productId = cart[i];\n        const authToken = localStorage.getItem('authToken'); // Create an array of promises, one for each request (UGGGHHH)\n\n        productRequests.push(axios.get(\"http://localhost:4000/product/\".concat(productId), {\n          headers: {\n            Authorization: \"Bearer \" + authToken\n          }\n        }));\n      } // Wait for all requests to finish (resolve)\n\n\n      Promise.all(productRequests).then(res => {\n        console.log('ALL FINISHED', res);\n        const products = res.map(item => item.data[0]);\n        this.setState({\n          allProducts: products\n        });\n      }).catch(err => console.warn('PROBLEM GETTING ERROR!', err)); //   axios.get(`http://localhost:4000/product/${productId}`, {\n      //     headers: {\n      //       Authorization: \"Bearer \" + authToken\n      //     }\n      //   })\n      //   .then( res => {\n      //     console.log('GOT ZE PRODUCT', res);\n      //\n      //     newProducts.push([{'name': res.data[0].name}, {\"price\": res.data[0].price}, {\"img\": res.data[0].image} ] )\n      //     // var joined = this.state.allProducts.concat([res.data[0].name, res.data[0].price, res.data[0].image ]);\n      //     // this.setState({ allProducts: joined })\n      //     // // this.setState({\n      //     //   allProducts: [res.data[0].name, res.data[0].price, res.data[0].image ]\n      //     // })\n      //   })\n      //   .catch(err => console.warn('PROBLEM GETTING ERROR!', err) );\n      //\n      // }\n    };\n\n    this.addNewToCart = () => {\n      console.log(\"name is: \".concat(this.props.location.state.name));\n    };\n\n    this.state = {\n      products: [],\n      userId: '',\n      allProducts: [],\n      stateUpdater: ''\n    };\n  } // componentDidUpdate(){\n  //   this.deconstructState()\n  // }\n\n\n  componentDidMount() {\n    // axios.get('http://localhost:4000/cart')\n    // .then( res => {\n    //   console.log('GOT CART', res);\n    // })\n    // .catch(err => console.warn('CART AJAX ERROR!', err) );\n    const authToken = localStorage.getItem('authToken'); //Get the users Cart\n\n    axios.get('http://localhost:4000/products/identifyseller', {\n      headers: {\n        Authorization: \"Bearer \" + authToken\n      }\n    }).then(res => {\n      console.log('GOT USER', res);\n      this.setState({\n        userId: res.data.user._id\n      }); // console.log(res.data.user.cart);\n\n      const usersCart = res.data.user.cart;\n      console.log(usersCart);\n      this.setState({\n        products: usersCart\n      });\n      this.deconstructState(usersCart); // for (var i = 0; i < usersCart.length; i++) {\n      //   thisproducts.push(usersCart[i])\n      // }\n      // this.updateUserState( res );\n    }).then(this.setState({\n      stateUpdater: 'updated!'\n    })).catch(err => console.warn('SELL USER AJAX ERROR!', err)); // this.setState({stateUpdater: 'updated!'})\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"nav-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"Home\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Cart\")), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/sell\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Sell\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Signup\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Login\"))))), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"SHOPPING CART\"), \"Count \", this.state.allProducts.length, React.createElement(\"div\", {\n      className: \"all-products\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, this.state.allProducts.length > 0 ? this.state.allProducts.map(p => React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, p.name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, p.price), React.createElement(\"img\", {\n      src: p.img,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }))) : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"cart is empty\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/joshparry/sei/projects/marketplace-app-MERN-stack/marketplace-react-frontend/src/components/Cart.js"],"names":["React","Component","axios","Link","Cart","constructor","props","deconstructState","cart","productRequests","i","length","console","log","productId","authToken","localStorage","getItem","push","get","headers","Authorization","Promise","all","then","res","products","map","item","data","setState","allProducts","catch","err","warn","addNewToCart","location","state","name","userId","stateUpdater","componentDidMount","user","_id","usersCart","render","p","price","img"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n// import { Link } from 'react-router-dom';\n// import {HashRouter as Router, Route} from 'react-router-dom';\n\nexport default class Cart extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      products: [],\n      userId: '',\n      allProducts: [],\n      stateUpdater: ''\n    }\n  }\n\n  // componentDidUpdate(){\n  //   this.deconstructState()\n  // }\n\n  componentDidMount(){\n\n    // axios.get('http://localhost:4000/cart')\n    // .then( res => {\n    //   console.log('GOT CART', res);\n    // })\n    // .catch(err => console.warn('CART AJAX ERROR!', err) );\n        const authToken = localStorage.getItem('authToken');\n    //Get the users Cart\n    axios.get('http://localhost:4000/products/identifyseller', {\n      headers: {\n        Authorization: \"Bearer \" + authToken\n      }\n    })\n    .then( res => {\n      console.log('GOT USER', res);\n      this.setState({userId: res.data.user._id})\n      // console.log(res.data.user.cart);\n\n      const usersCart = res.data.user.cart\n      console.log(usersCart);\n\n      this.setState({products: usersCart})\n\n      this.deconstructState(usersCart);\n\n      // for (var i = 0; i < usersCart.length; i++) {\n      //   thisproducts.push(usersCart[i])\n      // }\n      // this.updateUserState( res );\n    })\n    .then(     this.setState({stateUpdater: 'updated!'}))\n    .catch(err => console.warn('SELL USER AJAX ERROR!', err) );\n\n    // this.setState({stateUpdater: 'updated!'})\n\n  }\n\n  deconstructState = (cart) => {\n\n    const productRequests = [];\n\n    for (var i = 0; i < cart.length; i++) {\n      console.log(cart[i]);\n\n      let productId = cart[i]\n      const authToken = localStorage.getItem('authToken');\n\n      // Create an array of promises, one for each request (UGGGHHH)\n      productRequests.push(\n        axios.get(`http://localhost:4000/product/${productId}`, {\n          headers: {\n            Authorization: \"Bearer \" + authToken\n          }\n        })\n      );\n\n    }\n\n    // Wait for all requests to finish (resolve)\n    Promise.all( productRequests )\n    .then( res => {\n      console.log('ALL FINISHED', res);\n      const products = res.map( item => item.data[0] );\n      this.setState({ allProducts: products });\n    })\n    .catch(err => console.warn('PROBLEM GETTING ERROR!', err) );\n\n    //   axios.get(`http://localhost:4000/product/${productId}`, {\n    //     headers: {\n    //       Authorization: \"Bearer \" + authToken\n    //     }\n    //   })\n    //   .then( res => {\n    //     console.log('GOT ZE PRODUCT', res);\n    //\n    //     newProducts.push([{'name': res.data[0].name}, {\"price\": res.data[0].price}, {\"img\": res.data[0].image} ] )\n    //     // var joined = this.state.allProducts.concat([res.data[0].name, res.data[0].price, res.data[0].image ]);\n    //     // this.setState({ allProducts: joined })\n    //     // // this.setState({\n    //     //   allProducts: [res.data[0].name, res.data[0].price, res.data[0].image ]\n    //     // })\n    //   })\n    //   .catch(err => console.warn('PROBLEM GETTING ERROR!', err) );\n    //\n    // }\n\n\n  }\n\n  addNewToCart = () => {\n    console.log(`name is: ${this.props.location.state.name}`);\n  }\n\n  render(){\n    return (\n      <div>\n        <nav>\n          <ul className=\"nav-list\">\n            <li className=\"nav-item-left\"><div className=\"nav-item\"><Link to=\"/\">Home</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\">Cart</div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/sell\">Sell</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/signup\">Signup</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/login\">Login</Link></div></li>\n          </ul>\n        </nav>\n        <h1>SHOPPING CART</h1>\n     Count { this.state.allProducts.length}\n          <div className=\"all-products\">\n            {\n              this.state.allProducts.length > 0\n              ?\n              this.state.allProducts.map( p =>\n                <div>\n                <div>{p.name}</div>\n                <div>{p.price}</div>\n                <img src={p.img} />\n                </div>\n\n              )\n              :\n             <p>cart is empty</p>\n            }\n          </div>\n\n\n\n      </div>\n    );\n  }\n\n}\n"]},"metadata":{},"sourceType":"module"}