{"ast":null,"code":"var _jsxFileName = \"/Users/joshparry/sei/projects/marketplace-app-MERN-stack/marketplace-react-frontend/src/components/Sell.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom'; // upload an image\n// <h3>Welcome to the sell page</h3>\n// <form className=\"sell-form\">\n//   <label>Sell Item</label>\n//   <input type=\"text\" className=\"sell-input\"></input>\n//   <input type=\"submit\" className=\"sell-submit\" />\n// </form>\n\nclass Sell extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateUserState = res => {\n      this.setState({\n        userId: res.data.user._id,\n        userName: res.data.user.name,\n        email: res.data.user.email\n      });\n    };\n\n    this.handleChange = e => {\n      console.log(e.target.files);\n      const file = e.target.files[0];\n      console.log({\n        file\n      }); // try upload\n\n      const fd = new FormData();\n      fd.append('file', file);\n      fd.append('upload_preset', 'rzxjcm4t');\n      console.log(fd);\n      axios({\n        method: 'post',\n        url: 'https://api.cloudinary.com/v1_1/dwjvh0hlj/image/upload',\n        data: fd,\n        config: {\n          headers: {\n            // 'Content-Type': 'multipart/form-data',\n            // \"Access-Control-Allow-Origin\": \"*\"\n            \"Content-Type\": \"multipart/form-data\",\n            \"cache-control\": \"no-cache\"\n          }\n        }\n      }).then(res => {\n        console.log('RESPONSE', res); // new ajax reqjuest to Node backend with res.data....public_id and labels seleceted\n      });\n      var reader = new FileReader();\n      reader.addEventListener(\"load\", () => {\n        // preview.src = reader.result;\n        this.setState({\n          previewSrc: reader.result\n        });\n        this.submitVisionApiRequest(reader.result); // console.log('result', reader.result);\n      }, false);\n\n      if (file) {\n        reader.readAsDataURL(file);\n      }\n    };\n\n    this.state = {\n      userName: '',\n      userId: '',\n      email: '',\n      previewSrc: ''\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"Local storage is: \".concat(localStorage.getItem('authToken'))); // Find out info about the user of the current JWT token\n\n    axios.get('http://localhost:4000/products/identifyseller').then(res => {\n      console.log('GOT USER', res);\n      this.updateUserState(res);\n    }).catch(err => console.warn('SELL USER AJAX ERROR!', err));\n  } // Method to update the state to users info\n\n\n  // handleChange()\n  submitVisionApiRequest(base64Data) {\n    base64Data = base64Data.replace('data:image/jpeg;base64,', '');\n    let body = {\n      \"requests\": [{\n        \"image\": {\n          \"content\": base64Data\n        },\n        \"features\": [{\n          \"type\": \"LABEL_DETECTION\",\n          \"maxResults\": 10\n        }]\n      }]\n    };\n    axios.post('https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAcAWwGwIs7iNyPB5OdnCEG33wbJP8Re3s', body).then(response => console.log(response));\n  } // end of handle api change\n\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"nav-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Home\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Cart\")), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/sell\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Sell\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Signup\"))), React.createElement(\"li\", {\n      className: \"nav-item-right\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Login\"))))), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), this.state.previewSrc && React.createElement(\"img\", {\n      className: \"preview\",\n      src: this.state.previewSrc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Sell;","map":{"version":3,"sources":["/Users/joshparry/sei/projects/marketplace-app-MERN-stack/marketplace-react-frontend/src/components/Sell.jsx"],"names":["React","Component","axios","Link","Sell","constructor","props","updateUserState","res","setState","userId","data","user","_id","userName","name","email","handleChange","e","console","log","target","files","file","fd","FormData","append","method","url","config","headers","then","reader","FileReader","addEventListener","previewSrc","result","submitVisionApiRequest","readAsDataURL","state","componentDidMount","localStorage","getItem","get","catch","err","warn","base64Data","replace","body","post","response","render"],"mappings":"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","sourcesContent":["\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\n\n// upload an image\n\n// <h3>Welcome to the sell page</h3>\n// <form className=\"sell-form\">\n//   <label>Sell Item</label>\n//   <input type=\"text\" className=\"sell-input\"></input>\n//   <input type=\"submit\" className=\"sell-submit\" />\n// </form>\n\n\nclass Sell extends Component {\n\n  constructor(props){\n    super(props);\n    this.state = {\n      userName: '',\n      userId: '',\n      email: '',\n      previewSrc: ''\n    }\n  }\n\n  componentDidMount(){\n    console.log(`Local storage is: ${localStorage.getItem('authToken')}`);\n\n    // Find out info about the user of the current JWT token\n    axios.get('http://localhost:4000/products/identifyseller')\n    .then( res => {\n      console.log('GOT USER', res);\n      this.updateUserState( res );\n    })\n    .catch(err => console.warn('SELL USER AJAX ERROR!', err) );\n\n  }\n\n  // Method to update the state to users info\n  updateUserState = (res) => {\n    this.setState({userId: res.data.user._id, userName: res.data.user.name, email: res.data.user.email })\n  }\n\n  handleChange = (e) => {\n    console.log(e.target.files);\n    const file = e.target.files[0];\n    console.log({file});\n\n    // try upload\n    const fd = new FormData();\n    fd.append('file', file );\n    fd.append('upload_preset', 'rzxjcm4t');\n    console.log( fd );\n\n    axios({\n      method: 'post',\n      url: 'https://api.cloudinary.com/v1_1/dwjvh0hlj/image/upload',\n      data: fd,\n      config: { headers: {\n        // 'Content-Type': 'multipart/form-data',\n        // \"Access-Control-Allow-Origin\": \"*\"\n        \"Content-Type\": \"multipart/form-data\",\n        \"cache-control\": \"no-cache\",\n      } }\n    })\n    .then( res => {\n      console.log('RESPONSE', res)\n      // new ajax reqjuest to Node backend with res.data....public_id and labels seleceted\n    });\n\n\n\n    var reader  = new FileReader();\n\n    reader.addEventListener(\"load\", () => {\n      // preview.src = reader.result;\n      this.setState({ previewSrc: reader.result });\n      this.submitVisionApiRequest( reader.result );\n\n      // console.log('result', reader.result);\n    }, false);\n\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n\n  } // handleChange()\n\n  submitVisionApiRequest(base64Data){\n  base64Data = base64Data.replace('data:image/jpeg;base64,', '');\n  let body = {\n    \"requests\": [\n      {\n        \"image\": {\n          \"content\": base64Data,\n        },\n        \"features\": [\n          {\n            \"type\": \"LABEL_DETECTION\",\n            \"maxResults\": 10\n          }\n        ]\n      }\n    ]\n  };\n\n  axios.post(\n    'https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAcAWwGwIs7iNyPB5OdnCEG33wbJP8Re3s',\n    body\n  )\n  .then((response) => console.log(response));\n\n} // end of handle api change\n\n\n  render() {\n    return(\n      <div>\n        <nav>\n          <ul className=\"nav-list\">\n            <li className=\"nav-item-left\"><div className=\"nav-item\"><Link to=\"/\">Home</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\">Cart</div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/sell\">Sell</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/signup\">Signup</Link></div></li>\n            <li className=\"nav-item-right\"><div className=\"nav-item\"><Link to=\"/login\">Login</Link></div></li>\n          </ul>\n        </nav>\n\n\n        <input type=\"file\" onChange={this.handleChange}/>\n\n      {\n        this.state.previewSrc && <img className=\"preview\" src={this.state.previewSrc} />\n      }\n\n      </div>\n    )\n  }\n}\n\nexport default Sell\n"]},"metadata":{},"sourceType":"module"}